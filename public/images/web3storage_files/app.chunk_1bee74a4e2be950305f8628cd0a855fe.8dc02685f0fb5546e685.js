(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{103:function(e,t,n){"use strict";n.d(t,"b",(function(){return p}));n.d(t,"a",(function(){return y}));var a=n(82);var o=n(0);var r=n.n(o);var c=n(91);var i=n(6);var l=n(3);var s=n(19);var u=n(18);var d=n(111);var f=n(589);var v=n.n(f);function m(){m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n){if(Object.prototype.hasOwnProperty.call(n,a)){e[a]=n[a]}}}return e};return m.apply(this,arguments)}var C=undefined&&undefined.__rest||function(e,t){var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0)n[a]=e[a];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++){if(t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o]))n[a[o]]=e[a[o]]}return n};const b=e=>{var{iconType:t,position:n}=e,o=C(e,["iconType","position"]);const i=Object(u["a"])();return Object(c["createPortal"])(r.a.createElement("button",m({className:[v.a.actionButton,n==="left"?v.a.leftActionButton:v.a.rightActionButton].join(" ")},o),r.a.createElement(a["a"],{type:t,size:12,color:i.theme.isDarkTheme?"white":"#4E4D52"})),document.getElementById("modal-portal")||document.body)};const p=e=>{var t=C(e,[]);const n=Object(s["d"])(i["q"].magic.userCancelLogin());return r.a.createElement(b,m({position:"right",onClick:n},t,{iconType:d["b"],"aria-label":l["c"].generic.close.toString()}))};const y=e=>{var t=C(e,[]);return r.a.createElement(b,m({position:"left"},t,{iconType:d["a"],"aria-label":l["c"].generic.back.toString()}))}},108:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(10);var o=n(25);var r=n(116);var c=n(221);const i={mfaEnrollData:undefined,recoveryCodes:undefined};const l=Object(o["createReducer"])(i).handleAction(c["a"],((e,t)=>Object.assign(Object.assign({},e),{mfaEnrollData:t.payload}))).handleAction(c["b"],((e,t)=>Object.assign(Object.assign({},e),{recoveryCodes:t.payload})));const s=Object(r["a"])("mfa",l);const u=Object(a["a"])(s)},110:function(e,t,n){"use strict";n.d(t,"c",(function(){return m}));n.d(t,"a",(function(){return C}));n.d(t,"b",(function(){return b}));var a=n(0);var o=n(6);var r=n(14);var c=n(35);var i=n(19);var l=n(290);const s=l;var u=n(108);var d=n(221);var f=undefined&&undefined.__awaiter||function(e,t,n,a){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function c(e){try{l(a.next(e))}catch(e){r(e)}}function i(e){try{l(a["throw"](e))}catch(e){r(e)}}function l(e){e.done?n(e.value):o(e.value).then(c,i)}l((a=a.apply(e,t||[])).next())}))};const v=(e,t)=>{t(e);if(Object(o["n"])(e)&&!Object(l["isMfaErrorCode"])(e.code)){e.getControlFlowError().setUIThreadError()}};const m=()=>{const[e,t]=Object(a["useState"])();const[n,o]=Object(a["useState"])(false);const r=u["a"].hooks.useDispatch();const i=Object(c["b"])((e=>e.Auth.userID));const l=u["a"].hooks.useSelector((e=>{var t;return(t=e===null||e===void 0?void 0:e.mfaEnrollData)===null||t===void 0?void 0:t.info}));const m=u["a"].hooks.useSelector((e=>{var t;return(t=e===null||e===void 0?void 0:e.mfaEnrollData)===null||t===void 0?void 0:t.secret}));const C=u["a"].hooks.useSelector((e=>e===null||e===void 0?void 0:e.recoveryCodes));const b=()=>f(void 0,void 0,void 0,(function*(){try{t(null);o(true);const{data:e}=yield s.startTotpEnroll(i);r(Object(d["a"])({secret:e.secret,info:e.mfa_info}))}catch(e){v(e,t)}finally{o(false)}}));const p=e=>f(void 0,void 0,void 0,(function*(){if(!i||!l||!m){console.info("missing mfa finish required state from store");return}try{o(true);t(null);const{data:n}=yield s.finishTotpEnroll(i,l,e);r(Object(d["b"])(n.recovery_codes));return true}catch(e){v(e,t)}finally{o(false)}return false}));return{startMfaEnroll:b,finishMfaEnroll:p,mfaInfo:l,mfaSecret:m,recoveryCodes:C,isLoading:n,error:e}};const C=()=>{const[e,t]=Object(a["useState"])();const[n,o]=Object(a["useState"])(false);const r=Object(c["b"])((e=>e.Auth.userID));const i=e=>f(void 0,void 0,void 0,(function*(){try{t(null);o(true);yield s.disableTotp(r,e);return true}catch(e){v(e,t)}finally{o(false)}return false}));const l=e=>f(void 0,void 0,void 0,(function*(){try{t(null);o(true);yield s.disableTotpRecoveryCode(r,e);return true}catch(e){v(e,t)}finally{o(false)}return false}));return{disableTotp:i,disableTotpRecoveryCode:l,isLoading:n,error:e}};const b=e=>{const[t,n]=Object(a["useState"])();const[o,c]=Object(a["useState"])(false);const l=Object(i["h"])();const u=t=>f(void 0,void 0,void 0,(function*(){var a;const o=l?(a=Object(r["d"])(l))===null||a===void 0?void 0:a.jwt:undefined;try{n(null);c(true);return(yield s.mfaVerifyTotp(e,t,o)).data}catch(e){v(e,n)}finally{c(false)}return false}));const d=t=>f(void 0,void 0,void 0,(function*(){var a;const o=l?(a=Object(r["d"])(l))===null||a===void 0?void 0:a.jwt:undefined;try{n(null);c(true);return(yield s.mfaVerifyCodes(e,t,o)).data}catch(e){v(e,n)}finally{c(false)}return false}));return{mfaVerifyTotp:u,mfaVerifyCodes:d,isLoading:o,error:t}}},111:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n.d(t,"b",(function(){return i}));n.d(t,"c",(function(){return l}));n.d(t,"e",(function(){return s}));n.d(t,"d",(function(){return u}));n.d(t,"f",(function(){return d}));var a=n(0);var o=n.n(a);function r(){r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n){if(Object.prototype.hasOwnProperty.call(n,a)){e[a]=n[a]}}}return e};return r.apply(this,arguments)}const c={SVGContents:({fill:e})=>o.a.createElement("path",r({d:"M6.1276 11.2429L6.60299 10.7849C6.72184 10.6644 6.72184 10.4715 6.60299 10.3751L2.91869 6.61465H11.0479C11.1906 6.61465 11.3332 6.49412 11.3332 6.32538V5.65043C11.3332 5.5058 11.1906 5.36116 11.0479 5.36116H2.91869L6.60299 1.62482C6.72184 1.5284 6.72184 1.33555 6.60299 1.21503L6.1276 0.757021C6.03252 0.636494 5.84236 0.636494 5.72351 0.757021L0.75564 5.79506C0.636792 5.91559 0.636792 6.08433 0.75564 6.20486L5.72351 11.2429C5.84236 11.3634 6.03252 11.3634 6.1276 11.2429Z"},e)),viewbox:[0,0,12,12]};const i={SVGContents:({fill:e})=>o.a.createElement("path",r({d:"M5.99983 4.54193L9.98658 0.523362C10.1816 0.326774 10.4993 0.326142 10.6951 0.521954L10.9782 0.805076C11.174 1.00088 11.1734 1.31854 10.9768 1.51358L6.95834 5.50043L10.9624 9.5045C11.1577 9.69976 11.1577 10.0163 10.9624 10.2116L10.6952 10.4788C10.4994 10.6746 10.1817 10.674 9.98669 10.4774L5.99983 6.45894L1.99577 10.463C1.80051 10.6583 1.48393 10.6583 1.28866 10.463L1.03719 10.2115C0.841933 10.0163 0.841933 9.69969 1.0372 9.50443L5.04126 5.50036L1.0229 1.51362C0.8263 1.31857 0.82569 1.00088 1.02153 0.80508L1.28877 0.537899C1.48404 0.342673 1.8006 0.342691 1.99584 0.537938L5.99983 4.54193Z"},e)),viewbox:[0,0,12,12]};const l={SVGContents:({fill:e})=>o.a.createElement("path",r({d:"M17.3973 2.57812L15.3482 0.585938C14.9866 0.234375 14.5045 0 13.9821 0H7.07143C5.98661 0 5.14286 0.859375 5.14286 1.875V3.75H1.92857C0.84375 3.75 0 4.60938 0 5.625V18.125C0 19.1797 0.84375 20 1.92857 20H10.9286C11.9732 20 12.8571 19.1797 12.8571 18.125V16.25H16.0714C17.1161 16.25 18 15.4297 18 14.375V3.90625C18 3.39844 17.7589 2.92969 17.3973 2.57812ZM14.1429 1.28906C14.2232 1.32812 14.3438 1.36719 14.4241 1.44531L16.5134 3.47656C16.5938 3.55469 16.6339 3.67188 16.6741 3.75H14.1429V1.28906ZM11.5714 18.125C11.5714 18.4766 11.25 18.75 10.9286 18.75H1.92857C1.56696 18.75 1.28571 18.4766 1.28571 18.125V5.625C1.28571 5.3125 1.56696 5 1.92857 5H5.14286V14.375C5.14286 15.4297 5.98661 16.25 7.07143 16.25H11.5714V18.125ZM16.7143 14.375C16.7143 14.7266 16.3929 15 16.0714 15H7.07143C6.70982 15 6.42857 14.7266 6.42857 14.375V1.875C6.42857 1.5625 6.70982 1.25 7.07143 1.25H12.8571V4.0625C12.8571 4.60938 13.2589 5 13.8214 5H16.7143V14.375Z"},e)),viewbox:[0,0,18,20]};const s={SVGContents:({fill:e})=>o.a.createElement("path",r({d:"M9 16.4063C9.44196 16.4063 9.80357 16.0547 9.80357 15.625V13.125C9.80357 12.6953 9.44196 12.3438 9 12.3438C8.55804 12.3438 8.19643 12.6953 8.19643 13.125V15.625C8.19643 16.0547 8.55804 16.4063 9 16.4063ZM18 10.625C18 9.60938 17.1161 8.75 16.0714 8.75H15.4286V6.32813C15.4286 2.89063 12.5357 0.0390625 9 0C5.46429 0 2.57143 2.8125 2.57143 6.25V8.75H1.92857C0.84375 8.75 0 9.60938 0 10.625V18.125C0 19.1797 0.84375 20 1.92857 20H16.0714C17.1161 20 18 19.1797 18 18.125V10.625ZM3.85714 8.75V6.25C3.85714 3.51563 6.14732 1.25 9 1.25C11.8125 1.25 14.1429 3.51563 14.1429 6.25V8.75H3.85714ZM16.7143 18.125C16.7143 18.4766 16.3929 18.75 16.0714 18.75H1.92857C1.56696 18.75 1.28571 18.4766 1.28571 18.125V10.625C1.28571 10.3125 1.56696 10 1.92857 10H16.0714C16.3929 10 16.7143 10.3125 16.7143 10.625V18.125Z"},e)),viewbox:[0,0,18,20]};const u={SVGContents:({fill:e})=>o.a.createElement(o.a.Fragment,null,o.a.createElement("path",r({},e,{d:"M8.70483 12.2511C8.21502 11.7588 7.93985 11.0911 7.93985 10.3949C7.93985 9.6987 8.21502 9.03102 8.70483 8.53874C9.19464 8.04646 9.85897 7.7699 10.5517 7.7699C11.2444 7.7699 11.9087 8.04646 12.3985 8.53874C12.8883 9.03102 13.1635 9.6987 13.1635 10.3949C13.1635 11.0911 12.8883 11.7588 12.3985 12.2511C11.9087 12.7433 11.2444 13.0199 10.5517 13.0199C9.85897 13.0199 9.19464 12.7433 8.70483 12.2511Z"})),o.a.createElement("path",r({},e,{d:"M23.3608 4.0312C20.7947 1.45212 17.3149 0.00222552 13.6859 0C6.17014 0 -3.8147e-06 5.9199 -3.8147e-06 13.545C0.00220871 17.1924 1.44482 20.6897 4.01094 23.2688C6.57707 25.8479 10.0568 27.2978 13.6859 27.3C14.7933 27.3 15.8882 27.1404 16.9245 26.8716C16.9494 27.5509 17.2355 28.194 17.7227 28.6656C18.2098 29.1372 18.86 29.4005 19.5363 29.4H23.1929V33.075C23.1929 34.524 24.363 35.7 25.8047 35.7H29.4633V38.325C29.4633 39.2997 29.8486 40.2344 30.5343 40.9236C31.22 41.6128 32.1501 42 33.1198 42H38.3435C40.3619 42 42 40.3536 42 38.325V33.7638C41.9994 32.2324 41.3936 30.764 40.3159 29.6814L27.2882 16.5858C27.2246 16.5185 27.1782 16.4368 27.1527 16.3476C27.1273 16.2584 27.1236 16.1643 27.1419 16.0734C27.2673 15.351 27.3718 14.5677 27.3718 13.755C27.3696 10.1076 25.9269 6.61028 23.3608 4.0312ZM21.1446 6.25859C23.123 8.24693 24.2354 10.9431 24.2376 13.755C24.2274 14.3507 24.1658 14.9444 24.0537 15.5295C23.948 16.1187 23.985 16.7248 24.1618 17.2965C24.3385 17.8682 24.6498 18.3887 25.0692 18.8139L38.099 31.9074C38.5879 32.3988 38.8637 33.0687 38.8637 33.7638V38.325C38.8637 38.4642 38.8087 38.5978 38.7107 38.6962C38.6128 38.7947 38.4799 38.85 38.3414 38.85H33.1178C32.9792 38.85 32.8464 38.7947 32.7484 38.6962C32.6504 38.5978 32.5954 38.4642 32.5954 38.325V35.175C32.5954 33.726 31.4253 32.55 29.9836 32.55H26.327V28.875C26.327 27.426 25.157 26.25 23.7152 26.25H20.0608V24.675C20.0611 24.4141 19.9969 24.1572 19.874 23.9274C19.7511 23.6976 19.5733 23.5021 19.3566 23.3584C19.1399 23.2148 18.8911 23.1275 18.6325 23.1043C18.374 23.0812 18.1137 23.123 17.8752 23.226C16.5693 23.7909 15.1067 24.15 13.6859 24.15C10.8881 24.1478 8.20549 23.0297 6.22714 21.0414C4.24879 19.0531 3.13638 16.3569 3.13417 13.545C3.13417 7.7301 7.83125 3.15 13.6859 3.15C16.4837 3.15222 19.1663 4.27025 21.1446 6.25859Z"}))),viewbox:[0,0,42,42]};const d={SVGContents:({fill:e})=>o.a.createElement(o.a.Fragment,null,o.a.createElement("circle",r({},e,{cx:"20",cy:"20",r:"20"})),o.a.createElement("path",{d:"M12.2766 19.0298L11.1821 20.1484C10.828 20.5103 10.8096 21.0829 11.1397 21.4668L16.3892 27.5712C16.7784 28.0239 17.4793 28.0239 17.8686 27.5712L28.8568 14.7933C29.1869 14.4095 29.1685 13.8368 28.8144 13.4749L27.7199 12.3563C27.32 11.9475 26.6558 11.9689 26.2829 12.4025L17.1289 23.0474L13.7136 19.0759C13.3407 18.6423 12.6765 18.621 12.2766 19.0298ZM27.3713 12.6975C27.1713 12.4931 26.8392 12.5037 26.6527 12.7205L17.1289 23.7955L17.1292 23.7959L26.6531 12.7209C26.8396 12.5041 27.1717 12.4934 27.3716 12.6978L27.3713 12.6975ZM16.7851 27.2813C16.7763 27.2724 16.7677 27.2632 16.7594 27.2535L11.5099 21.1491C11.3449 20.9572 11.3541 20.6709 11.5311 20.4899L12.6256 19.3713C12.817 19.1757 13.1292 19.177 13.3191 19.3674C13.1292 19.1767 12.8167 19.1752 12.6252 19.3709L11.5307 20.4895C11.3537 20.6705 11.3445 20.9568 11.5096 21.1487L16.759 27.2532C16.7674 27.263 16.7761 27.2723 16.7851 27.2813Z",fill:"white"})),viewbox:[0,0,40,40],color:e=>e.hex.primary.base}},139:function(e,t,n){e.exports={recoveryCodePage:"_ac",title:"_ad",body:"_ae",lostRecoveryCodeBody:"_af",recoveryCodeLabel:"_ag",recoveryCodesWarning:"_ah",recoveryCodes:"_ai",mfaLinkButton:"_aj"}},158:function(e,t,n){e.exports={totpPage:"_ak",body:"_al",errorMsg:"_am",mfaLinkButton:"_an"}},197:function(e,t,n){"use strict";n.d(t,"c",(function(){return E}));n.d(t,"a",(function(){return O}));n.d(t,"b",(function(){return L}));var a=n(0);var o=n.n(a);var r=n(82);var c=n(281);var i=n(18);var l=n(237);var s=n(3);var u=n(158);var d=n.n(u);var f=n(16);var v=n(103);var m=n(111);var C=n(110);var b=n(84);var p=n(291);var y=undefined&&undefined.__awaiter||function(e,t,n,a){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function c(e){try{l(a.next(e))}catch(e){r(e)}}function i(e){try{l(a["throw"](e))}catch(e){r(e)}}function l(e){e.done?n(e.value):o(e.value).then(c,i)}l((a=a.apply(e,t||[])).next())}))};const E=()=>{const{navigateTo:e}=Object(f["b"])();const{theme:t}=Object(i["a"])();const{finishMfaEnroll:n,isLoading:u,error:E}=Object(C["c"])();const[g,_]=Object(a["useState"])("");const h=t=>y(void 0,void 0,void 0,(function*(){if(yield n(t)){e("mfa-recovery-codes")}}));const O=()=>{_("")};const{PinCodeInput:j,pinCodeInputProps:S,clearPinCodeInput:L,focusForm:T}=Object(l["a"])({onComplete:h,onChange:O});Object(a["useEffect"])((()=>T()),[]);Object(a["useEffect"])((()=>{if((E===null||E===void 0?void 0:E.code)===p["INCORRECT_TWO_FA_CODE"]){L();_(s["c"].mfa.enter_totp_invalid_code.toString());setTimeout((()=>T()),0)}}),[E]);return o.a.createElement(o.a.Fragment,null,!u&&o.a.createElement(o.a.Fragment,null,o.a.createElement(v["a"],{onClick:()=>e("mfa-enroll-code")})),o.a.createElement("div",{className:d.a.totpPage},o.a.createElement(r["a"],{type:m["e"],size:{width:40,height:44},color:t.color.primary.base.toString()}),o.a.createElement(c["a"],{size:22,orientation:"vertical"}),o.a.createElement("h1",{className:d.a.body},s["c"].mfa.enter_totp_body.toString()),o.a.createElement(c["a"],{size:40,orientation:"vertical"}),u?o.a.createElement(b["a"],null):o.a.createElement(j,S),g&&o.a.createElement(o.a.Fragment,null,o.a.createElement(c["a"],{size:16,orientation:"vertical"}),o.a.createElement("div",{className:d.a.errorMsg},g))))};var g=n(108);var _=n(292);var h=undefined&&undefined.__awaiter||function(e,t,n,a){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function c(e){try{l(a.next(e))}catch(e){r(e)}}function i(e){try{l(a["throw"](e))}catch(e){r(e)}}function l(e){e.done?n(e.value):o(e.value).then(c,i)}l((a=a.apply(e,t||[])).next())}))};const O=({returnToRoute:e})=>{const{navigateTo:t}=Object(f["b"])();const{theme:n}=Object(i["a"])();const{disableTotp:u,isLoading:y,error:E}=Object(C["a"])();const[O,j]=Object(a["useState"])("");const[S,L]=Object(a["useState"])(false);const T=()=>{if(e)t(e);else g["a"].dispatch(Object(_["b"])())};const w=e=>h(void 0,void 0,void 0,(function*(){if(yield u(e)){L(true);setTimeout((()=>T()),2e3)}}));const V=()=>{j("")};const{PinCodeInput:N,pinCodeInputProps:M,clearPinCodeInput:x,focusForm:k}=Object(l["a"])({onComplete:w,onChange:V});Object(a["useEffect"])((()=>{setTimeout((()=>k()),0)}),[]);Object(a["useEffect"])((()=>{if((E===null||E===void 0?void 0:E.code)===p["INCORRECT_TWO_FA_CODE"]){x();L(false);j(s["c"].mfa.enter_totp_invalid_code.toString());setTimeout((()=>k()),0)}}),[E]);let P=o.a.createElement(o.a.Fragment,null,o.a.createElement(N,M),O&&o.a.createElement(o.a.Fragment,null,o.a.createElement(c["a"],{size:16,orientation:"vertical"}),o.a.createElement("div",{className:d.a.errorMsg},O)),o.a.createElement(c["a"],{size:24,orientation:"vertical"}),o.a.createElement("button",{className:d.a.mfaLinkButton,onClick:()=>t("enter-recovery-code")},s["c"].mfa.lost_code_button.toString()));if(y)P=o.a.createElement(b["a"],null);if(S)P=o.a.createElement(r["a"],{"aria-label":s["c"].generic.loading.toString(),type:m["f"]});return o.a.createElement(o.a.Fragment,null,!y&&!S&&o.a.createElement(o.a.Fragment,null,e&&o.a.createElement(v["a"],{onClick:()=>t(e)}),!e&&o.a.createElement(v["b"],null)),o.a.createElement("div",{className:d.a.totpPage},o.a.createElement(r["a"],{type:m["e"],size:{width:40,height:44},color:n.color.primary.base.toString()}),o.a.createElement(c["a"],{size:22,orientation:"vertical"}),o.a.createElement("h1",{className:d.a.body},s["c"].mfa.enter_totp_body.toString()),o.a.createElement(c["a"],{size:40,orientation:"vertical"}),P))};var j=n(290);var S=undefined&&undefined.__awaiter||function(e,t,n,a){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function c(e){try{l(a.next(e))}catch(e){r(e)}}function i(e){try{l(a["throw"](e))}catch(e){r(e)}}function l(e){e.done?n(e.value):o(e.value).then(c,i)}l((a=a.apply(e,t||[])).next())}))};const L=({onMfaComplete:e,flowContext:t,nonMfaErrorRoute:n})=>{const{theme:u}=Object(i["a"])();const{navigateTo:v}=Object(f["b"])();const{mfaVerifyTotp:y,isLoading:E,error:g}=Object(C["b"])(t);const[_,h]=Object(a["useState"])("");const[O,L]=Object(a["useState"])(false);const T=t=>S(void 0,void 0,void 0,(function*(){const n=yield y(t);if(n){L(true);setTimeout((()=>e(n)),1500)}}));const w=()=>{h("")};const{PinCodeInput:V,pinCodeInputProps:N,clearPinCodeInput:M,focusForm:x}=Object(l["a"])({onComplete:T,onChange:w});Object(a["useEffect"])((()=>{setTimeout((()=>x()),0)}),[]);Object(a["useEffect"])((()=>{if((g===null||g===void 0?void 0:g.code)===p["INCORRECT_TWO_FA_CODE"]){M();L(false);h(s["c"].mfa.enter_totp_invalid_code.toString());setTimeout((()=>x()),0)}else if(g&&!Object(j["isMfaErrorCode"])(g.code)&&n){v(n)}}),[g]);let k=o.a.createElement(o.a.Fragment,null,o.a.createElement(V,N),_&&o.a.createElement(o.a.Fragment,null,o.a.createElement(c["a"],{size:16,orientation:"vertical"}),o.a.createElement("div",{className:d.a.errorMsg},_)),o.a.createElement(c["a"],{size:24,orientation:"vertical"}),o.a.createElement("button",{className:d.a.mfaLinkButton,onClick:()=>v("enter-recovery-code")},s["c"].mfa.lost_code_button.toString()));if(E)k=o.a.createElement(b["a"],null);if(O)k=o.a.createElement(r["a"],{"aria-label":s["c"].generic.loading.toString(),type:m["f"]});return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:d.a.totpPage},o.a.createElement(r["a"],{type:m["e"],size:{width:40,height:44},color:u.color.primary.base.toString()}),o.a.createElement(c["a"],{size:22,orientation:"vertical"}),o.a.createElement("h1",{className:d.a.body},s["c"].mfa.enter_totp_body.toString()),o.a.createElement(c["a"],{size:40,orientation:"vertical"}),k))}},221:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n.d(t,"b",(function(){return i}));var a=n(25);const o="mfa/SET_ENABLE_FLOW_MFA_DATA";const r="mfa/SET_RECOVERY_CODES";const c=Object(a["createAction"])(o,(e=>e))();const i=Object(a["createAction"])(r,(e=>e))()},290:function(e,t,n){"use strict";n.r(t);n.d(t,"startTotpEnroll",(function(){return c}));n.d(t,"finishTotpEnroll",(function(){return i}));n.d(t,"isMfaErrorCode",(function(){return l}));n.d(t,"disableTotp",(function(){return s}));n.d(t,"disableTotpRecoveryCode",(function(){return u}));n.d(t,"mfaVerifyTotp",(function(){return d}));n.d(t,"mfaVerifyCodes",(function(){return f}));var a=n(326);var o=n(22);var r=n(291);function c(e){const t=`/v1/auth/user/enroll/totp/create`;const n={auth_user_id:e};return o["a"].magic.post(t,n)}function i(e,t,n){const a=`/v1/auth/user/enroll/totp/enable`;const r={auth_user_id:e,mfa_info:t,one_time_code:n};return o["a"].magic.post(a,r)}function l(e){return r[e]}function s(e,t){const n=`/v1/auth/user/enroll/totp/disable`;const a={auth_user_id:e,one_time_code:t};return o["a"].magic.post(n,a)}function u(e,t){const n=`/v1/auth/user/enroll/codes/disable`;const a={auth_user_id:e,recovery_code:t};return o["a"].magic.post(n,a)}function d(e,t,n){const r=`/v1/auth/user/login/totp/verify`;const c={login_flow_context:e,one_time_code:t};return o["a"].magic.post(r,c,{headers:Object.assign({},Object(a["a"])(n))})}function f(e,t,n){const r=`/v1/auth/user/login/codes/verify`;const c={login_flow_context:e,recovery_code:t};return o["a"].magic.post(r,c,{headers:Object.assign({},Object(a["a"])(n))})}},291:function(e,t,n){"use strict";n.r(t);n.d(t,"INCORRECT_TWO_FA_CODE",(function(){return a}));n.d(t,"TWO_FA_METHOD_UNAVAILABLE",(function(){return o}));const a="INCORRECT_TWO_FA_CODE";const o="TWO_FA_METHOD_UNAVAILABLE"},292:function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));n.d(t,"a",(function(){return l}));var a=n(14);var o=n(10);var r=n(6);var c=undefined&&undefined.__awaiter||function(e,t,n,a){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function c(e){try{l(a.next(e))}catch(e){r(e)}}function i(e){try{l(a["throw"](e))}catch(e){r(e)}}function l(e){e.done?n(e.value):o(e.value).then(c,i)}l((a=a.apply(e,t||[])).next())}))};function i(){return()=>c(this,void 0,void 0,(function*(){const{payload:e}=o["b"].getState().UIThread;if(!e){return Promise.reject(new Error("No payload on UI thread"))}yield Object(a["i"])(e,true)}))}function l(){return()=>c(this,void 0,void 0,(function*(){const{payload:e}=o["b"].getState().UIThread;if(!e){return Promise.reject(new Error("No payload on UI thread"))}yield Object(a["h"])(e,r["q"].rpc.invalidRequestError("User cancelled"))}))}},589:function(e,t,n){e.exports={actionButton:"_bj",rightActionButton:"_bk",leftActionButton:"_bl"}},95:function(e,t,n){"use strict";n.d(t,"d",(function(){return y}));n.d(t,"a",(function(){return j}));n.d(t,"c",(function(){return L}));n.d(t,"b",(function(){return T}));var a=n(0);var o=n.n(a);var r=n(2072);var c=n(82);var i=n(281);var l=n(765);var s=n(3);var u=n(18);var d=n(108);var f=n(292);var v=n(139);var m=n.n(v);var C=n(111);var b=n(16);var p=n(221);const y=({returnToRoute:e})=>{const{navigateTo:t}=Object(b["b"])();const{copy:n}=Object(r["a"])();const{theme:v}=Object(u["a"])();const y=d["a"].hooks.useSelector((e=>e.recoveryCodes));const[E,g]=Object(a["useState"])(s["c"].mfa.copy_code.toString());const _=()=>{d["a"].dispatch(Object(p["a"])(undefined));if(e)t(e);else d["a"].dispatch(Object(f["b"])())};const h=()=>{g(s["c"].mfa.copied.toString());setTimeout((()=>g(s["c"].mfa.copy_code.toString())),1500);n(y===null||y===void 0?void 0:y.join())};return o.a.createElement("div",{className:m.a.recoveryCodePage},o.a.createElement(c["a"],{type:C["d"],color:v.color.primary.base.toString()}),o.a.createElement(i["a"],{size:28,orientation:"vertical"}),o.a.createElement("h1",{className:m.a.title},s["c"].mfa.recovery_code_title.toString()),o.a.createElement(i["a"],{size:8,orientation:"vertical"}),o.a.createElement("div",{className:m.a.lostRecoveryCodeBody},s["c"].mfa.recovery_code_body.toString()),o.a.createElement(i["a"],{size:40,orientation:"vertical"}),o.a.createElement("div",{className:m.a.recoveryCodes},y===null||y===void 0?void 0:y.join()),o.a.createElement(i["a"],{size:8,orientation:"vertical"}),o.a.createElement("div",{className:m.a.recoveryCodeLabel},s["c"].mfa.recovery_code_label.toString({appName:v.appName})),o.a.createElement(i["a"],{size:40,orientation:"vertical"}),o.a.createElement(l["a"],{outline:true,onClick:h},E),o.a.createElement(i["a"],{size:16,orientation:"vertical"}),o.a.createElement(l["a"],{onClick:_},s["c"].mfa.finish_setup.toString()))};var E=n(432);var g=n(103);var _=n(84);var h=n(290);var O=undefined&&undefined.__awaiter||function(e,t,n,a){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function c(e){try{l(a.next(e))}catch(e){r(e)}}function i(e){try{l(a["throw"](e))}catch(e){r(e)}}function l(e){e.done?n(e.value):o(e.value).then(c,i)}l((a=a.apply(e,t||[])).next())}))};const j=({recoverySuccessRoute:e,navBackRoute:t,nonMfaErrorRoute:n,isLoading:r,error:l,onRecoverySuccess:v,tryRecovery:p})=>{const{navigateTo:y}=Object(b["b"])();const{theme:j}=Object(u["a"])();const S=()=>{if(e)y(e);else d["a"].dispatch(Object(f["b"])())};const[L,T]=Object(a["useState"])("");const[w,V]=Object(a["useState"])(5);const[N,M]=Object(a["useState"])(false);const x=e=>O(void 0,void 0,void 0,(function*(){var t;const n=(t=e===null||e===void 0?void 0:e.target)===null||t===void 0?void 0:t.value;if(n.length>8){return}T(n);if(n.length===8&&w>0){V(w-1);const e=yield p(n);if(e){M(true);setTimeout((()=>v?v(e):S()),1e3)}}}));Object(a["useEffect"])((()=>{if(w<=0)y("recovery-code-lockout")}),[w]);Object(a["useEffect"])((()=>{if(l&&!Object(h["isMfaErrorCode"])(l.code)&&n){y(n)}}),[l]);let k;if(l){k=s["c"].mfa.invalid_recovery_code_msg.toString()}if(w<4){k=s["c"].mfa.max_attempt_warning_msg.toString({attempts:`${w}`})}let P=o.a.createElement(o.a.Fragment,null,o.a.createElement(E["a"],{errorMessage:k,value:L,onChange:x,maxLength:8,placeholder:s["c"].mfa.recovery_code_input_placeholder.toString()}),o.a.createElement(i["a"],{size:16,orientation:"vertical"}),o.a.createElement("div",{className:m.a.recoveryCodesWarning},s["c"].mfa.use_recovery_code_warning.toString()),o.a.createElement(i["a"],{size:24,orientation:"vertical"}),o.a.createElement("button",{className:m.a.mfaLinkButton,onClick:()=>y("lost-recovery-code")},s["c"].mfa.lost_recovery_code.toString()));if(r){P=o.a.createElement(_["a"],null)}if(N){P=o.a.createElement(c["a"],{"aria-label":s["c"].generic.loading.toString(),type:C["f"]})}return o.a.createElement("div",{className:m.a.recoveryCodePage},!r&&!N&&o.a.createElement(g["a"],{onClick:()=>y(t)}),o.a.createElement(c["a"],{type:C["d"],color:j.color.primary.base.toString()}),o.a.createElement(i["a"],{size:28,orientation:"vertical"}),o.a.createElement("div",{className:m.a.body},s["c"].mfa.use_recovery_code_body.toString()),o.a.createElement(i["a"],{size:40,orientation:"vertical"}),P)};var S=n(101);const L=({navBackRoute:e})=>{const{navigateTo:t}=Object(b["b"])();const{theme:n}=Object(u["a"])();return o.a.createElement("div",{className:m.a.recoveryCodePage},e&&o.a.createElement(g["a"],{onClick:()=>t(e)}),o.a.createElement(S["a"],{height:"48px"}),o.a.createElement(i["a"],{size:32,orientation:"vertical"}),o.a.createElement("div",{className:m.a.title},s["c"].mfa.lost_recovery_code_contact.toString({appName:n.appName})),o.a.createElement(i["a"],{size:8,orientation:"vertical"}),o.a.createElement("div",{className:m.a.lostRecoveryCodeBody},s["c"].mfa.lost_recovery_code_body.toString({appName:n.appName})))};const T=({lockoutExitRoute:e,hideActions:t})=>{const{navigateTo:n}=Object(b["b"])();const a=()=>{if(e)n(e);else d["a"].dispatch(Object(f["a"])())};return o.a.createElement(o.a.Fragment,null,!t&&o.a.createElement(g["b"],{onClick:a}),o.a.createElement(L,null))}}}]);