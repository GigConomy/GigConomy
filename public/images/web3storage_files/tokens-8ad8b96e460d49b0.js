(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[64],{1034:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSG:function(){return L},default:function(){return R}});var r=t(6277),a=t(1664),s=t(2784),o=t(29),l=t(7794),i=t.n(l),c=t(1163),u=t(589),d=t(4628),h=t(8727),m=t(2322),f=function(e){var n=e.content,t=(0,s.useRef)(null),a=(0,s.useState)(!1),l=a[0],f=a[1],v=(0,c.useRouter)(),k=v.query,p=v.push,x=v.replace,b=(0,h.rU)(),j=b.tokens,g=b.createToken,y=b.isCreating,N=b.getTokens,w=(0,s.useCallback)(function(){var e=(0,o.Z)(i().mark((function e(n){var r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.ZP.trackEvent(u.ZP.events.TOKEN_CREATE,j.length?{ui:u.ZP.ui.NEW_TOKEN,action:"Create new token"}:{ui:u.ZP.ui.TOKENS_EMPTY,action:"New API Token"}),n.preventDefault(),null===(r=t.current)||void 0===r||!r.value){e.next=8;break}return e.next=5,g(null===(a=t.current)||void 0===a?void 0:a.value);case 5:return e.next=7,N();case 7:p("/tokens");case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[p,j,N,g]);(0,s.useEffect)((function(){var e=function(){var e,n,r;null!==(e=t.current)&&void 0!==e&&e.classList.contains("unfocused")&&(delete k.create,x({query:k},void 0,{shallow:!0})),null===(n=t.current)||void 0===n||n.classList.remove("unfocused"),null===(r=t.current)||void 0===r||r.classList.remove("focused")},n=t.current;return null===n||void 0===n||n.addEventListener("animationend",e),function(){null===n||void 0===n||n.removeEventListener("animationend",e)}}),[x,k]),(0,s.useLayoutEffect)((function(){var e,n;k.create&&!y&&(null===(e=t.current)||void 0===e||e.focus(),null===(n=t.current)||void 0===n||n.classList.add("focused"))}),[k.create,y]);return(0,m.jsx)("div",{className:(0,r.Z)("token-creator-container",y&&"isDisabled"),children:y?n.loading_message:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("form",{className:(0,r.Z)(!k.create&&"hidden","token-creator-input-container"),onSubmit:w,children:[(0,m.jsx)("input",{ref:t,required:!0,className:"token-creator-input",placeholder:n.placeholder,onChange:function(){var e;""!==(null===(e=t.current)||void 0===e?void 0:e.value)?l||f(!0):l&&f(!1)},onBlur:function(){var e;null===(e=t.current)||void 0===e||e.classList.add("unfocused")}}),(0,m.jsx)("button",{className:"token-creator-submit",children:l?"\u2192":"+"})]}),(0,m.jsx)(d.Z,{className:(0,r.Z)("token-creator-create",k.create&&"hidden"),href:"/account",onClick:function(){return p("/tokens?create=true")},variant:d.W.TEXT,children:n.prompt})]})})},v=t(8767),k=t(8563),p=t(9499);function x(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?x(Object(t),!0).forEach((function(n){(0,p.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var j=function(e){return(0,m.jsx)("svg",b(b({xmlns:"http://www.w3.org/2000/svg",width:11.103,height:13.929,viewBox:"0 0 11.103 13.929"},e),{},{children:(0,m.jsx)("g",{children:(0,m.jsxs)("g",{fill:"currentColor",children:[(0,m.jsx)("path",{d:"M9.488 2.505 9.114 12.6a.34.34 0 0 1-.333.32h-6.46a.341.341 0 0 1-.333-.32L1.614 2.505a.505.505 0 0 0-1.009.037l.374 10.095a1.35 1.35 0 0 0 1.342 1.292h6.46a1.349 1.349 0 0 0 1.342-1.292l.374-10.095a.505.505 0 1 0-1.009-.037Z"}),(0,m.jsx)("path",{d:"M5.148 4.538v6.863a.404.404 0 1 0 .807 0V4.538a.404.404 0 1 0-.807 0Z"}),(0,m.jsx)("path",{d:"m2.927 4.554.2 6.863a.404.404 0 0 0 .807-.024l-.2-6.863a.404.404 0 0 0-.807.024Z"}),(0,m.jsx)("path",{d:"m7.366 4.53-.2 6.863a.404.404 0 0 0 .807.024l.2-6.863a.404.404 0 0 0-.807-.024Z"}),(0,m.jsx)("path",{d:"M.5 2.725h10.1a.505.505 0 0 0 0-1.009H.5a.504.504 0 0 0 0 1.009Z"}),(0,m.jsx)("path",{d:"m4.018 2.056.21-.735a.489.489 0 0 1 .413-.312h1.82a.489.489 0 0 1 .413.312l.21.735.97-.277-.21-.735A1.491 1.491 0 0 0 6.461 0h-1.82a1.491 1.491 0 0 0-1.384 1.044l-.21.735Z"})]})})}))},g=t(7756),y=JSON.parse('{"c":{"heading":"API Tokens","ui":{"return":{"text":"Return to dashboard","url":"/account","theme":"text"},"test_token":"Want to test the token quickly?<span className=\'testing-cta\'> Paste it in <a href=\'https://bafybeic5r5yxjh5xpmeczfp34ysrjcoa66pllnjgffahopzrl5yhex7d7i.ipfs.dweb.link/\' target=\'_blank\' rel=\'noreferrer\'>this demo website</a></span>"},"token_creator":{"prompt":"+ Create a new API Token","placeholder":"Name your token","loading_message":"Creating..."},"tokens_manager":{"heading":"API Tokens","table":{"message":"You don\u2019t have any API Tokens created yet.","cta":{"text":"Create your first API token","theme":"text","link":"/tokens?create=true","ui":"TOKENS_EMPTY","action":"New API Token"},"token_row_labels":{"secret":{"label":"Token"},"name":{"label":"Name"}}},"ui":{"filter":{"placeholder":"Search for a token"},"sortby":{"label":"Sort By","options":[{"label":"Alphabetical A-Z","key":"name","value":"a-z","direction":"ASC","compareFn":"ALPHANUMERIC"},{"label":"Most Recently Added","value":"newest","direction":"NEWEST","compareFn":"TIMEBASED"},{"label":"Least Recently Added","value":"oldest","direction":"OLDEST","compareFn":"TIMEBASED"}]},"results":{"options":[{"label":"View 10 Results","value":"10"},{"label":"View 20 Results","value":"20"},{"label":"View 50 Results","value":"50"},{"label":"View 100 Results","value":"100"}]},"delete":{"alert":"Are you sure? Deleted tokens cannot be recovered!","ok":"Delete Token","cancel":"Cancel","heading":"Web3.Storage says"}}}}}'),N=y.c.tokens_manager.table.token_row_labels,w=function(e){var n=e.className,t=void 0===n?"":n,a=e.name,s=e.secret,o=e.id,l=void 0===o?"":o,i=e.isHeader,c=e.onTokenDelete,u=e.deletingTokenId;return(0,m.jsxs)("div",{className:(0,r.Z)("tokens-manager-row",t,i&&"tokens-manager-row-header",!!u&&"isDisabled"),children:[(0,m.jsxs)("span",{className:"token-name",title:a,children:[(0,m.jsx)("span",{className:"file-row-label medium-down-only",children:N.name.label}),a]}),(0,m.jsxs)("span",{className:"token-id-container",title:s,children:[(0,m.jsx)("span",{className:"file-row-label medium-down-only",children:N.secret.label}),(0,m.jsx)("span",{className:"token-id",children:(0,g.aS)(s,36,"...","double")})]}),!i&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"token-copy",children:(0,m.jsx)("button",{onClick:function(){return(0,g.Zk)(s)},children:(0,m.jsx)(k.Z,{})})}),(0,m.jsx)("div",{className:"token-delete",children:(0,m.jsx)("button",{onClick:function(){return null===c||void 0===c?void 0:c(l)},children:(0,m.jsx)(j,{})})})]})]})},Z=t(6347),T=t(3447),E=t(9421),_=t(6193),P=t(8011),S=t(6023),C=t(2608),O=t(7645),A=t(2256),D=t(357),I=function(e){var n=e.content,t=(0,h.rU)(),l=t.tokens,f=t.fetchDate,k=t.isFetchingTokens,p=t.deleteToken,x=t.getTokens,b=t.isCreating,j=(0,s.useState)(""),g=j[0],y=j[1],N=(0,c.useRouter)(),I=N.query,L=N.replace,R=(0,v.useQueryClient)(),q=(0,s.useRef)(I.order),M=(0,s.useState)(!1),K=(0,s.useState)([]),F=K[0],W=K[1],B=(0,s.useState)([]),U=B[0],V=B[1],z=(0,s.useState)([]),H=z[0],X=z[1],Y=(0,s.useState)(null),Q=Y[0],G=Y[1],J=(0,s.useState)(!1),$=J[0],ee=J[1],ne=n.table.token_row_labels;(0,s.useEffect)((function(){if(!q.current&&I.order&&"a-z"!==I.order||q.current&&I.order&&I.order!==q.current){delete I.page,L({query:I},void 0,{shallow:!0});var e=document.querySelector(".tokens-manager-container");null===e||void 0===e||e.scrollIntoView(!0),q.current=I.order}}),[I.order,I,L]);var te=(0,s.useCallback)((0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p(g);case 3:return e.prev=3,e.next=6,R.invalidateQueries("get-tokens");case 6:return u.ZP.trackEvent(u.ZP.events.TOKEN_DELETE,{ui:u.ZP.ui.TOKENS}),e.next=9,x();case 9:return y(""),e.finish(3);case 11:M[1](!1);case 12:case"end":return e.stop()}}),e,null,[[0,,3,11]])}))),[M,p,g,R,x]),re=(0,s.useCallback)(function(){var e=(0,o.Z)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M[1](!0),y(n);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[M]),ae=(0,s.useCallback)((function(){M[1](!1)}),[M]),se=(0,s.useCallback)((function(){ee(!0),setTimeout((function(){ee(!1)}),500)}),[ee]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"section tokens-manager-container",children:[(0,m.jsxs)("div",{className:"tokens-manager-header",children:[(0,m.jsx)("h4",{children:n.heading}),(0,m.jsx)(E.Z,{items:l,icon:(0,m.jsx)(S.Z,{}),filterKeys:["name","secret"],placeholder:n.ui.filter.placeholder,queryParam:"filter",onChange:W}),(0,m.jsx)(_.ZP,{items:F,staticLabel:n.ui.sortby.label,options:n.ui.sortby.options,value:"a-z",queryParam:"order",onChange:V,onSelectChange:se})]}),(0,m.jsx)(w,{name:ne.name.label,secret:ne.secret.label,isHeader:!0}),(0,m.jsx)("div",{className:"tokens-manager-table-content",children:k||!f?(0,m.jsx)(Z.ZP,{className:"tokens-manager-loading-spinner"}):l.length?H.map((function(e){var n=e.name,t=e.secret,r=e._id;return(0,m.jsx)(w,{id:r,name:n,secret:t,deletingTokenId:g,onTokenDelete:function(){return re(r)}},t)})):(0,m.jsxs)("span",{className:"tokens-manager-upload-cta",children:[n.table.message,"\xa0",(0,m.jsx)(d.Z,{className:(0,r.Z)(b&&"isDisabled"),href:n.table.cta.link,variant:n.table.cta.theme,tracking:{ui:u.ZP.ui[n.table.cta.ui],action:n.table.cta.action},children:(0,m.jsx)(a.default,{href:n.table.cta.link,children:n.table.cta.text})})]})}),(0,m.jsxs)("div",{className:"tokens-manager-footer",children:[(0,m.jsx)(P.Z,{items:U,itemsPerPage:Q||10,visiblePages:2,queryParam:"page",onChange:X,scrollTarget:".tokens-manager-container"}),(0,m.jsx)(T.Z,{className:"tokens-manager-result-dropdown",value:n.ui.results.options[0].value,options:n.ui.results.options,queryParam:"items",onChange:function(e){return G(e)},onSelectChange:se})]}),(0,m.jsx)("div",{className:(0,r.Z)("files-manager-overlay",$?"show":""),children:(0,m.jsx)("div",{className:"files-manager-overlay-check",children:(0,m.jsx)(C.Z,{})})})]}),(0,m.jsxs)(O.Z,{className:"delete-modal",animation:"ken",modalState:M,closeIcon:(0,m.jsx)(D.Z,{className:"file-uploader-close"}),showCloseButton:!0,children:[(0,m.jsx)(A.Z,{variant:"saturated-variant"}),(0,m.jsxs)("div",{className:"delete-modal-content",children:[(0,m.jsx)("h5",{children:null===n||void 0===n?void 0:n.ui.delete.heading}),(0,m.jsx)("p",{children:null===n||void 0===n?void 0:n.ui.delete.alert})]}),(0,m.jsxs)("div",{className:"delete-modal-buttons",children:[(0,m.jsx)(d.Z,{variant:d.W.OUTLINE_DARK,onClick:te,children:null===n||void 0===n?void 0:n.ui.delete.ok}),(0,m.jsx)(d.Z,{variant:d.W.OUTLINE_DARK,onClick:ae,children:null===n||void 0===n?void 0:n.ui.delete.cancel})]})]})]})},L=!0,R=function(){var e=(0,h.rU)(),n=e.tokens,t=e.fetchDate,o=e.isFetchingTokens,l=e.getTokens,i=y.c;return(0,s.useEffect)((function(){t||o||l()}),[t,l,o]),(0,m.jsxs)("div",{className:"page-container tokens-container",children:[(0,m.jsxs)("div",{className:"tokens-header",children:[(0,m.jsx)("h3",{children:i.heading}),(0,m.jsx)(f,{content:y.c.token_creator})]}),(0,m.jsx)(I,{content:y.c.tokens_manager}),(0,m.jsxs)("div",{className:"tokens-footer",children:[(0,m.jsx)(d.Z,{className:(0,r.Z)("dashboard-link",!!n.length&&"hasTokens"),href:i.ui.return.url,variant:i.ui.return.theme,children:(0,m.jsx)(a.default,{href:i.ui.return.url,children:i.ui.return.text})}),(0,m.jsx)("div",{dangerouslySetInnerHTML:{__html:i.ui.test_token},className:"testing-cta-container"})]})]})}},6904:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tokens",function(){return t(1034)}])},6835:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var r=t(2937);function a(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,s=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(s.push(r.value),!n||s.length!==n);o=!0);}catch(i){l=!0,a=i}finally{try{o||null==t.return||t.return()}finally{if(l)throw a}}return s}}(e,n)||(0,r.Z)(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}},function(e){e.O(0,[182,841,774,888,179],(function(){return n=6904,e(e.s=n);var n}));var n=e.O();_N_E=n}]);